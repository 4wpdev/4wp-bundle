{"version":3,"file":"index.js","mappings":"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","sources":["webpack://4wp-bundle/./assets/js/admin/App.js","webpack://4wp-bundle/external window [\"wp\",\"apiFetch\"]","webpack://4wp-bundle/external window [\"wp\",\"components\"]","webpack://4wp-bundle/external window [\"wp\",\"element\"]","webpack://4wp-bundle/external window \"React\"","webpack://4wp-bundle/webpack/bootstrap","webpack://4wp-bundle/webpack/runtime/compat get default export","webpack://4wp-bundle/webpack/runtime/define property getters","webpack://4wp-bundle/webpack/runtime/hasOwnProperty shorthand","webpack://4wp-bundle/webpack/runtime/make namespace object","webpack://4wp-bundle/./assets/js/admin/index.js"],"sourcesContent":["import { useState, useEffect } from '@wordpress/element';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Spinner, Card, Button, TabPanel, Notice } from '@wordpress/components';\n\nconst gridStyle = {\n  display: 'grid',\n  gridTemplateColumns: 'repeat(3, 1fr)',\n  gap: '20px',\n  alignItems: 'stretch',\n};\n\nconst App = () => {\n  const [installed, setInstalled] = useState([]);\n  const [available, setAvailable] = useState(null);\n  const [installing, setInstalling] = useState({});\n  const [notice, setNotice] = useState(null);\n\n  const loadBlocks = () => {\n    apiFetch({ path: '4wp/v1/blocks' }).then((data) => {\n      setInstalled(data.installed || []);\n      setAvailable(data.available || []);\n    });\n  };\n\n  useEffect(() => {\n    loadBlocks();\n  }, []);\n\n  const toggleBlock = (slug, action) => {\n    // Додаємо логування для дебагу\n    console.log('toggleBlock:', { slug, action });\n    apiFetch({\n      path: '4wp/v1/block-toggle',\n      method: 'POST',\n      data: { slug, action }\n    }).then(() => {\n      loadBlocks(); // просто оновлюємо список, без редіректу\n    });\n  };\n\n  const installBlock = (block) => {\n    if (!block.download_url) {\n      setNotice({ status: 'error', message: 'No download URL for this plugin.' });\n      return;\n    }\n    setInstalling((prev) => ({ ...prev, [block.slug]: true }));\n    setNotice(null);\n    apiFetch({\n      path: '4wp/v1/plugin-install',\n      method: 'POST',\n      data: { download_url: block.download_url }\n    })\n      .then((res) => {\n        if (res && res.success) {\n          setNotice({ status: 'success', message: 'Plugin installed successfully.' });\n          loadBlocks(); // Оновлюємо списки з бекенду, щоб уникнути проблеми з некоректним slug\n        } else {\n          setNotice({ status: 'error', message: res && res.message ? res.message : 'Install failed.' });\n        }\n      })\n      .catch((err) => {\n        setNotice({ status: 'error', message: err.message || 'Install failed.' });\n      })\n      .finally(() => {\n        setInstalling((prev) => ({ ...prev, [block.slug]: false }));\n      });\n  };\n\n  if (!installed || available === null) return <Spinner />;\n\n  // Створюємо map для швидкого пошуку встановлених плагінів за slug\n  const installedMap = installed.reduce((acc, block) => {\n    acc[block.slug] = block;\n    return acc;\n  }, {});\n\n  return (\n    <div style={{ padding: '20px', paddingTop: '48px' }}>\n      <h1>4WP Bundle</h1>\n      {notice && <Notice status={notice.status} isDismissible onRemove={() => setNotice(null)}>{notice.message}</Notice>}\n      <TabPanel\n        tabs={[\n          { name: 'installed', title: 'Installed', className: 'tab-installed' },\n          { name: 'available', title: 'Available', className: 'tab-available' },\n        ]}\n      >\n        {(tab) => (\n          <div style={gridStyle}>\n            {tab.name === 'installed' && installed.map((block) => (\n              <Card key={block.slug} style={{ minHeight: '180px', display: 'flex', flexDirection: 'column', justifyContent: 'space-between', padding: '15px' }}>\n                <div>\n                  <h3>{block.name}</h3>\n                  <p>Version: {block.version}</p>\n                </div>\n                <Button\n                  variant={block.active ? 'secondary' : 'primary'}\n                  onClick={() => toggleBlock(block.slug, block.active ? 'deactivate' : 'activate')}\n                >\n                  {block.active ? 'Deactivate' : 'Activate'}\n                </Button>\n              </Card>\n            ))}\n\n            {tab.name === 'available' && available.map((block) => {\n              const installedBlock = installedMap[block.slug];\n              return (\n                <Card key={block.slug} style={{ minHeight: '180px', display: 'flex', flexDirection: 'column', justifyContent: 'space-between', padding: '15px' }}>\n                  <div>\n                    <h3>{block.title || block.name}</h3>\n                    <p>{block.description}</p>\n                    <p>Version: {block.version}</p>\n                    {installedBlock && installedBlock.active && (\n                      <p style={{ color: '#22c55d', fontWeight: 600 }}>Activated</p>\n                    )}\n                  </div>\n                  {installedBlock ? (\n                    installedBlock.active ? (\n                      <Button\n                        variant=\"secondary\"\n                        onClick={() => toggleBlock(block.slug, 'deactivate')}\n                      >\n                        Deactivate\n                      </Button>\n                    ) : (\n                      <Button\n                        variant=\"primary\"\n                        onClick={() => toggleBlock(block.slug, 'activate')}\n                      >\n                        Activate\n                      </Button>\n                    )\n                  ) : (\n                    <Button\n                      variant=\"primary\"\n                      isBusy={!!installing[block.slug]}\n                      disabled={!!installing[block.slug]}\n                      onClick={() => installBlock(block)}\n                    >\n                      {installing[block.slug] ? 'Installing...' : 'Install'}\n                    </Button>\n                  )}\n                </Card>\n              );\n            })}\n          </div>\n        )}\n      </TabPanel>\n    </div>\n  );\n};\n\nexport default App;\n","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"React\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { render } from '@wordpress/element';\nimport App from './App';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const target = document.getElementById('4wp-bundle-admin-app');\n  if (target) render(<App />, target);\n});\n"],"names":["useState","useEffect","apiFetch","Spinner","Card","Button","TabPanel","Notice","gridStyle","display","gridTemplateColumns","gap","alignItems","App","installed","setInstalled","available","setAvailable","installing","setInstalling","notice","setNotice","loadBlocks","path","then","data","toggleBlock","slug","action","console","log","method","installBlock","block","download_url","status","message","prev","res","success","catch","err","finally","createElement","installedMap","reduce","acc","style","padding","paddingTop","isDismissible","onRemove","tabs","name","title","className","tab","map","key","minHeight","flexDirection","justifyContent","version","variant","active","onClick","installedBlock","description","color","fontWeight","isBusy","disabled","render","document","addEventListener","target","getElementById"],"sourceRoot":""}